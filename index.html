

<!DOCTYPE html>
<html lang="en">
    <head>
        <title> Hello, World</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            body {
            background: #1D1F20;
            padding: 16px;
            }
            canvas {
            border: 1px dotted red;
            }
            .chart-container {
            position: relative;
            margin: auto;
            height: 80vh;
            width: 90vw;
            }
        </style>
    </head>
    <body id="body">
        <div class="chart-container">
            <canvas id="chart"></canvas>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
        <script>
            fetch('/analysis.json').then((data) => {
                    data.json().then((analysis) => {
                            Object.values(analysis).forEach(item => console.log(item))
                     var data = {
                       labels: Object.keys(analysis),
                       datasets: [{
                         label: "Dataset #1",
                         backgroundColor: "rgba(255,99,132,0.2)",
                         borderColor: "rgba(255,99,132,1)",
                         borderWidth: 2,
                         hoverBackgroundColor: "rgba(255,99,132,0.4)",
                         hoverBorderColor: "rgba(255,99,132,1)",
                         data: Object.values(analysis).map(item => item.length),
                       }]
                     };
                     var options = {
                       maintainAspectRatio: false,
                       scales: {
                         y: {
                           stacked: true,
                           grid: {
                             display: true,
                             color: "rgba(255,99,132,0.2)"
                           }
                         },
                         x: {
                           grid: {
                             display: false
                           }
                         }
                       }
                     };
                     new Chart('chart', {
                       type: 'bar',
                       options: options,
                       data: data
                     });
                    })
            }).catch(() => {
                    document.getElementById('body').innerHTML = '<h1 style="color: #ffff">Cannot find file analysis.json in folder</h1>'
            })
        </script>
    </body>
</html>


